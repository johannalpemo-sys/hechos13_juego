<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>La exhortación de Pablo en Antioquía</title>

<style>
    body {
        margin: 0;
        padding: 20px;
        font-family: Arial;
        background: #fafafa;
        text-align: center;
    }

    h1 {
        font-size: 22px;
        margin-bottom: 10px;
    }

    .container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        align-items: center;
    }

    .options {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        width: 100%;
        max-width: 480px;
    }

    .draggable {
        width: 110px;
        height: 110px;
        border-radius: 10px;
        position: absolute;
        touch-action: none;
        user-select: none;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 15px;
        color: white;
        font-weight: bold;
    }

    .dropzones {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        width: 100%;
    }

    .dropzone {
        width: 150px;
        height: 150px;
        border: 3px dashed #000;
        border-radius: 10px;
        position: relative;
    }

    .mark {
        position: absolute;
        bottom: -25px;
        font-size: 24px;
        font-weight: bold;
        width: 100%;
        text-align: center;
    }

    #verso {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
        min-height: 60px;
    }
</style>
</head>

<body>

<h1>La exhortación de Pablo en Antioquía (3ª Parte)<br>Regocijo y persecución por la Palabra<br>Hechos 13:42-52</h1>

<div class="container">
    
    <div id="options" class="options"></div>

    <div class="dropzones">
        <div id="jews" class="dropzone"></div>
        <div id="gentiles" class="dropzone"></div>
    </div>

    <div id="verso"></div>
</div>

<script>
/* -------------------- DATOS --------------------- */

const colores = [
    "#FF5733", "#33FF57", "#3357FF", "#FF33A8",
    "#33FFF5", "#A833FF", "#FFC733", "#FF8F33"
];

const respuestas = [
    { texto: "Glorificar la Palabra", zona: "gentiles", verso: "Hechos 13:48" },
    { texto: "Se opusieron a Pablo", zona: "jews", verso: "Hechos 13:45" },
    { texto: "Creyeron muchos", zona: "gentiles", verso: "Hechos 13:48" },
    { texto: "Persecución contra Pablo", zona: "jews", verso: "Hechos 13:50" }
];

/* ------------ CREAR LAS TARJETAS ------------ */

let optionsDiv = document.getElementById("options");

respuestas.forEach((r, i) => {
    let div = document.createElement("div");
    div.classList.add("draggable");
    div.innerText = r.texto;
    div.dataset.target = r.zona;
    div.dataset.verso = r.verso;
    div.style.background = colores[i % colores.length];
    div.style.position = "relative";
    div.style.touchAction = "none";

    optionsDiv.appendChild(div);
});

/* ------------ DRAG & DROP PARA CELULAR + PC ------------ */

let draggables = document.querySelectorAll(".draggable");
let dropzones = document.querySelectorAll(".dropzone");

draggables.forEach(el => {

    let offsetX = 0, offsetY = 0;

    /* MOUSE */
    el.addEventListener("mousedown", startDrag);
    document.addEventListener("mousemove", drag);
    document.addEventListener("mouseup", endDrag);

    /* TOUCH */
    el.addEventListener("touchstart", startDrag);
    document.addEventListener("touchmove", drag, { passive: false });
    document.addEventListener("touchend", endDrag);

    function startDrag(e) {
        el.style.zIndex = 1000;
        let point = e.touches ? e.touches[0] : e;

        let rect = el.getBoundingClientRect();
        offsetX = point.clientX - rect.left;
        offsetY = point.clientY - rect.top;

        el.dataset.dragging = "true";
    }

    function drag(e) {
        if (el.dataset.dragging !== "true") return;

        e.preventDefault();

        let point = e.touches ? e.touches[0] : e;

        let x = point.clientX - offsetX;
        let y = point.clientY - offsetY;

        el.style.position = "absolute";
        el.style.left = x + "px";
        el.style.top = y + "px";
    }

    function endDrag() {
        if (el.dataset.dragging !== "true") return;
        el.dataset.dragging = "false";

        let placed = false;

        dropzones.forEach(zone => {
            let z = zone.getBoundingClientRect();
            let d = el.getBoundingClientRect();

            let overlap =
                d.right > z.left &&
                d.left < z.right &&
                d.bottom > z.top &&
                d.top < z.bottom;

            if (overlap) {
                placed = true;

                // Acomodar al centro del dropzone
                el.style.left = (z.left + (z.width - d.width) / 2) + "px";
                el.style.top = (z.top + (z.height - d.height) / 2) + "px";

                // Validar
                validar(el, zone.id);
            }
        });

        // Si no cayó en zona → se queda donde soltó (NO regresa)
    }
});

/* ------------ VALIDACIÓN ------------ */

function validar(el, zona) {
    let correcta = el.dataset.target === zona;
    let verso = document.getElementById("verso");

    let mark = document.createElement("div");
    mark.classList.add("mark");
    mark.innerText = correcta ? "✔" : "✘";
    mark.style.color = correcta ? "green" : "red";
    el.appendChild(mark);

    verso.innerText = correcta ?
        "Correcto: " + el.dataset.verso :
        "Incorrecto: " + el.dataset.verso;

    // Bloquear
    el.dataset.locked = "true";
    el.style.pointerEvents = "none";
}
</script>

</body>
</html>